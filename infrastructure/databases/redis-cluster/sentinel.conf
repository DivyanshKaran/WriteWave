# Redis Sentinel Configuration for WriteWave Microservices
# ========================================================

# Sentinel Configuration
port 26379
sentinel announce-ip redis-sentinel-1
sentinel announce-port 26379

# Logging
loglevel notice
logfile ""
syslog-enabled no

# Working Directory
dir /tmp

# Master Configuration
sentinel monitor writewave-cluster redis-cluster-proxy 6379 2
sentinel auth-pass writewave-cluster ${REDIS_PASSWORD}
sentinel down-after-milliseconds writewave-cluster 5000
sentinel parallel-syncs writewave-cluster 1
sentinel failover-timeout writewave-cluster 10000
sentinel deny-scripts-reconfig yes

# Notification Script
# sentinel notification-script writewave-cluster /usr/local/bin/notify.sh

# Client Reconfiguration Script
# sentinel client-reconfig-script writewave-cluster /usr/local/bin/reconfig.sh

# Security
requirepass ${SENTINEL_PASSWORD}
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command KEYS ""
rename-command CONFIG ""
rename-command SHUTDOWN SHUTDOWN_WRITEWAVE_SENTINEL
rename-command DEBUG ""

# Performance
tcp-keepalive 60
timeout 0

# Protected Mode
protected-mode no

# Disable THP
disable-thp yes
