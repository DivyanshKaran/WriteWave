server {
    listen 80;
    server_name localhost;

    # Health check endpoint
    location /health {
        access_log off;
        return 200 '{"status": "healthy", "timestamp": "$time_iso8601", "service": "content-service"}';
        add_header Content-Type application/json;
    }

    # Content endpoints
    location /api/v1/content {
        if ($request_method = OPTIONS) {
            add_header Access-Control-Allow-Origin "*";
            add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
            add_header Access-Control-Allow-Headers "Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, Authorization";
            add_header Access-Control-Max-Age 3600;
            add_header Content-Length 0;
            add_header Content-Type text/plain;
            return 204;
        }

        if ($request_method = GET) {
            return 200 '{"content": [{"id": 1, "type": "kanji", "character": "一", "meaning": "one"}, {"id": 2, "type": "hiragana", "character": "あ", "meaning": "a"}], "total": 2}';
            add_header Content-Type application/json;
        }

        if ($request_method = POST) {
            return 201 '{"id": 3, "type": "katakana", "character": "ア", "meaning": "a", "created": true}';
            add_header Content-Type application/json;
        }
    }

    # Character endpoints
    location /api/v1/characters {
        if ($request_method = OPTIONS) {
            add_header Access-Control-Allow-Origin "*";
            add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
            add_header Access-Control-Allow-Headers "Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, Authorization";
            add_header Access-Control-Max-Age 3600;
            add_header Content-Length 0;
            add_header Content-Type text/plain;
            return 204;
        }

        if ($request_method = GET) {
            return 200 '{"characters": [{"id": 1, "character": "一", "type": "kanji", "stroke_count": 1, "grade": 1}, {"id": 2, "character": "あ", "type": "hiragana", "stroke_count": 3, "grade": 1}], "total": 2}';
            add_header Content-Type application/json;
        }
    }

    # Kanji endpoints
    location /api/v1/kanji {
        if ($request_method = OPTIONS) {
            add_header Access-Control-Allow-Origin "*";
            add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
            add_header Access-Control-Allow-Headers "Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, Authorization";
            add_header Access-Control-Max-Age 3600;
            add_header Content-Length 0;
            add_header Content-Type text/plain;
            return 204;
        }

        if ($request_method = GET) {
            return 200 '{"kanji": [{"id": 1, "character": "一", "meaning": "one", "kunyomi": ["ひと"], "onyomi": ["いち"], "stroke_count": 1, "grade": 1}], "total": 1}';
            add_header Content-Type application/json;
        }
    }

    # Hiragana endpoints
    location /api/v1/hiragana {
        if ($request_method = OPTIONS) {
            add_header Access-Control-Allow-Origin "*";
            add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
            add_header Access-Control-Allow-Headers "Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, Authorization";
            add_header Access-Control-Max-Age 3600;
            add_header Content-Length 0;
            add_header Content-Type text/plain;
            return 204;
        }

        if ($request_method = GET) {
            return 200 '{"hiragana": [{"id": 1, "character": "あ", "pronunciation": "a", "stroke_count": 3, "grade": 1}], "total": 1}';
            add_header Content-Type application/json;
        }
    }

    # Katakana endpoints
    location /api/v1/katakana {
        if ($request_method = OPTIONS) {
            add_header Access-Control-Allow-Origin "*";
            add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
            add_header Access-Control-Allow-Headers "Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, Authorization";
            add_header Access-Control-Max-Age 3600;
            add_header Content-Length 0;
            add_header Content-Type text/plain;
            return 204;
        }

        if ($request_method = GET) {
            return 200 '{"katakana": [{"id": 1, "character": "ア", "pronunciation": "a", "stroke_count": 2, "grade": 1}], "total": 1}';
            add_header Content-Type application/json;
        }
    }

    # Default location
    location / {
        return 200 '{"message": "Content Service", "endpoints": ["/health", "/api/v1/content", "/api/v1/characters", "/api/v1/kanji", "/api/v1/hiragana", "/api/v1/katakana"]}';
        add_header Content-Type application/json;
    }
}
