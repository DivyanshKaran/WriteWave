# Production Environment Configuration for Kong API Gateway

# Kong Configuration
KONG_DATABASE: postgres
KONG_PG_HOST: kong-database
KONG_PG_USER: kong
KONG_PG_PASSWORD: ${KONG_DB_PASSWORD}
KONG_PG_DATABASE: kong

# Kong Proxy and Admin
KONG_PROXY_LISTEN: 0.0.0.0:8000
KONG_ADMIN_LISTEN: 0.0.0.0:8001

# Logging
KONG_LOG_LEVEL: warn
KONG_PROXY_ACCESS_LOG: /dev/stdout
KONG_ADMIN_ACCESS_LOG: /dev/stdout
KONG_PROXY_ERROR_LOG: /dev/stderr
KONG_ADMIN_ERROR_LOG: /dev/stderr

# Plugins
KONG_PLUGINS: bundled,jwt-auth,rate-limiting,cors,request-transformer,response-transformer,circuit-breaker,ip-restriction,error-handler

# Redis Configuration
REDIS_HOST: redis
REDIS_PORT: 6379
REDIS_PASSWORD: ${REDIS_PASSWORD}
REDIS_DATABASE: 0

# JWT Configuration
JWT_SECRET: ${JWT_SECRET}
JWT_EXPIRES_IN: 3600
JWT_REFRESH_EXPIRES_IN: 604800

# Rate Limiting
USER_RATE_LIMIT: 100
IP_RATE_LIMIT: 1000
RATE_LIMIT_WINDOW: 60

# CORS Configuration
ALLOWED_ORIGINS: https://writewave.app,https://admin.writewave.app
ALLOWED_METHODS: GET,POST,PUT,DELETE,OPTIONS,PATCH
ALLOWED_HEADERS: Accept,Accept-Version,Content-Length,Content-MD5,Content-Type,Date,Authorization,X-Requested-With
EXPOSED_HEADERS: X-Auth-Token,X-User-ID,X-User-Role,X-Service,X-Version
CREDENTIALS: true
MAX_AGE: 3600

# Circuit Breaker
CIRCUIT_BREAKER_THRESHOLD: 5
CIRCUIT_BREAKER_TIMEOUT: 60
CIRCUIT_BREAKER_UNHEALTHY: 3
CIRCUIT_BREAKER_HEALTHY: 2

# Error Handling
ERROR_RESPONSE_FORMAT: json
INCLUDE_REQUEST_DETAILS: false
INCLUDE_SERVICE_INFO: false
LOG_ERRORS: true
HIDE_SENSITIVE_INFO: true

# Service Discovery
SERVICE_DISCOVERY_ENABLED: true
HEALTH_CHECK_INTERVAL: 30
HEALTH_CHECK_TIMEOUT: 5000

# Load Balancing
LOAD_BALANCING_STRATEGY: least_connections
MAX_CONNECTIONS: 5000
KEEPALIVE_TIMEOUT: 65

# Security
IP_WHITELIST: ${ALLOWED_IPS}
ENABLE_SSL: true
SSL_CERT_PATH: /etc/ssl/certs/production.crt
SSL_KEY_PATH: /etc/ssl/private/production.key

# Monitoring
ENABLE_METRICS: true
METRICS_PORT: 9090
HEALTH_CHECK_ENDPOINT: /health
METRICS_ENDPOINT: /metrics

# Production Specific
DEBUG_MODE: false
VERBOSE_LOGGING: false
MOCK_SERVICES: false
AUTO_RELOAD: false
PERFORMANCE_MONITORING: true
SECURITY_MONITORING: true
AUDIT_LOGGING: true
